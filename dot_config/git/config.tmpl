{{- $name := output "gh" "api" "user" "--jq" ".name" | trim -}}
{{- $id := output "gh" "api" "user" "--jq" ".id" | trim -}}
{{- $login := output "gh" "api" "user" "--jq" ".login" | trim -}}
[user]
  name = {{ $name }}
  email = {{ $id }}+{{ $login }}@users.noreply.github.com
[core]
  editor = nvim
  hooksPath = ~/.git-hooks
[alias]
  a   = add
  aa  = add -A :/
  ap  = add -p
  b   = for-each-ref --count=10 --sort=-committerdate refs/heads/ --format='%(refname:short)'
  bd  = branch -D
  bn  = checkout -b
  c   = commit
  caa = commit -a --amend
  cm  = commit -v -m
  d   = diff
  f   = fetch
  h   = log --pretty=format:'%h %ad | %s [%an]' --graph --date=short
  l   = pull
  o   = checkout
  m   = merge
  mf  = merge --ff-only
  p   = push -u
  poh = push -u origin head
  s   = stash
  ra  = remote add
  rb  = rebase
  rbc = rebase --continue
  rbi = rebase -i
  rr  = remote rm
  rs  = remote -v show
  rt  = restore
  rv  = revert
  sa  = stash apply
  sh  = show
  st  = status
  sw  = switch
  # PR Stack aliases
  stack-log = log --graph --oneline --decorate --first-parent
  stack-diff = "!f() { git diff $(git merge-base HEAD ${1:-origin/main})..HEAD; }; f"
  stack-range = "!f() { echo \"$(git merge-base HEAD ${1:-origin/main})..HEAD\"; }; f"
[apply]
  whitespace = fix
[push]
  default = tracking
[pull]
  default = tracking
  rebase = true
[init]
  defaultBranch = main
[help]
  autocorrect = 20
[filter "lfs"]
  clean = git-lfs clean -- %f
  smudge = git-lfs smudge -- %f
  process = git-lfs filter-process
  required = true
[credential]
	helper = cache --timeout=86400
[credential "https://github.com"]
	helper =
	helper = !/opt/homebrew/bin/gh auth git-credential
[credential "https://gist.github.com"]
	helper =
	helper = !/opt/homebrew/bin/gh auth git-credential
