# opencode-pilot configuration
# Automation daemon for OpenCode - polls issues and spawns sessions

startup_delay: 0

defaults:
  agent: plan

# Auto-discover repos from ~/code via git remote origin
# Worktree support auto-detected at runtime via OpenCode API
repos_dir: ~/code

sources:
  # Linear tickets assigned to me in 0DIN-Devs team (via team-context MCP)
  - preset: linear/my-issues
    tool:
      mcp: team-context
      name: list_issues
    args:
      team: "0DIN-Devs"
      assignee: "me"
      state: "in_progress"
    repos: [0din-ai/odin]

  # GitHub PRs where my review is requested
  - preset: github/review-requests

  # My PRs needing attention (conflicts OR human feedback)
  - preset: github/my-prs-attention

  # GitHub issues assigned to me
  - preset: github/my-issues

  # Apple Reminders - Agent list
  - name: reminders
    prompt: reminder
    model: ollama/llama3.1
    tool:
      command: "remindctl show all --list Agent --json | jq '[.[] | select(.isCompleted == false)]'"
    working_dir: /Users/athal/code/dotfiles
    item:
      id: "reminder:{id}"
    session:
      name: "{title}"
    tools:
      reminders:
        response_key: ""
        mappings:
          body: notes

tools:
  team-context:
    response_key: issues
    mappings:
      body: description
      number: identifier
